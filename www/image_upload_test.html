<!DOCTYPE html>
<html>
<head>
    <title>Image upload test</title>
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <script type="text/javascript" src="scripts/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <link href="css/anime.css" rel="stylesheet">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">

    <meta http-equiv="Content-Security-Policy" content="default-src *; style-src *  'unsafe-inline'; script-src *  'unsafe-inline'; media-src *">

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript">
 function getImage() {
     navigator.camera.getPicture(uploadPhoto, function (message) {
 alert('get picture failed');
 }, {
 quality: 100,
 destinationType: navigator.camera.DestinationType.FILE_URI,
 sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
 });
}

function uploadPhoto(imageURI) {
 var options = new FileUploadOptions();
 options.fileKey = "file";
 options.fileName = imageURI.substr(imageURI.lastIndexOf('/') + 1);
 $("#photo_chosen").text(imageURI.substr(imageURI.lastIndexOf('/') + 1));
 options.mimeType = "image/jpeg";
 console.log(options.fileName);
 var params = new Object();
 params.value1 = "test";
 params.value2 = "param";
 options.params = params;
 options.chunkedMode = false;

 $("#uplo").click(function () {



     var ft = new FileTransfer();
     ft.upload(imageURI, "http://forwardingenuity.com/insert_image1.php", function (result) {
         console.log(JSON.stringify(result));
     }, function (error) {
         console.log(JSON.stringify(error));
     }, options);
     window.location.replace("image_upload_test.html");
 });

 }
    </script>
</head>
<body>

    <div class="container">
        <button class="btn btn-black1 btn-lg" type="button" id="add" style="display:inline-block" data-toggle="modal" data-target="#myModal">
            <span class="glyphicon glyphicon-plus white"></span>
        </button>


    </div>

    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Modal Header</h4>
                    <p class="text-danger" id="message"></p>
                </div>
                <div class="modal-body">
                    <button onclick="getImage()">Choose a Photo</button><div id="photo_chosen" style="width:300px; border: 1px solid black; padding:10px; margin-top:10px; margin-left:3px; display:inline-block; border-color:black; top:2px;"></div>

                   
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" id="uplo">Submit</button>
                </div>
            </div>

        </div>
    </div>
    
</body>
</html>